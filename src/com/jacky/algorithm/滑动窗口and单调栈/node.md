## 滑动窗口是什么？


滑动窗口是一种想象出来的数据结构：

滑动窗口有左边界L和有边界R

在数组或者字符串或者一个序列上，记为S，窗口就是S[L..R]这一部分

L往右滑意味着一个样本出了窗口，R往右滑意味着一个样本进了窗口

L和R都只能往右滑

滑动窗口、首尾指针等技巧，说白了是一种求解问题的流程设计。


## 滑动内最大值和最小值的更新结构

窗口不管L还是R滑动之后，都会让窗口呈现新状况，

如何能够更快的得到窗口当前状况下的最大值和最小值？

最好平均下来复杂度能做到O(1)

利用单调双端队列！

### 规则

一开始L，R都是在数组的左边界 (L,R = -1)

1. R往右动,R++,新数就从队列右侧进入
2. L往右动，L++
3. L <= R 


### 实现

（如何现在是要求窗口最大值的问题）

#### R++，注意队列中存入的是下标

1. 准备一个双端队列,按照 从 大 到 小 的顺序 
2. R++,将确定的数从队未进如，也就是从小段进入，假设进入队列影响到
队列从大 到小的顺序，那么就一次将队尾的数弹出,然后将当前数进入
   
#### L++,注意队列中存入的是下标

1. 如果L当前的和队头的下标是一样的，那么就将队头弹出
2. 否则就不做处理

那么想获取当前滑动窗口的最大值，其实就是队列头的下标对应的数!!!
注意： L，R 不能回退

### 窗口内最值的原理

1. 假设现在形成了窗口的状况，R在不动的情况下，L往右移动，谁有成为最大值的优先级
2. R++的时候，将小于当前数都从队尾弹出，因为R的下标比弹出的数的下标晚过期并且比它弹出的数大
也就是说，弹出的数无法成为最大值了

## 单调栈是什么？

求的是i位置最近的最值问题

一种特别设计的栈结构，为了解决如下的问题：

给定一个可能含有重复值的数组arr，i位置的数一定存在如下两个信息

1. arr[i]的左侧离i最近并且小于(或者大于)arr[i]的数在哪？
2. arr[i]的右侧离i最近并且小于(或者大于)arr[i]的数在哪？

如果想得到arr中所有位置的两个信息，怎么能让得到信息的过程尽量快。

### 那么到底怎么设计呢？

### 流程

(如果求的是i位置最近的比i小的值)

1. 建立一个从栈低到栈顶 小 -> 大 的栈(注意栈中存放的是下标)
2. 数组的数依次进栈，假设 进栈会影响 栈的状态（栈低到栈顶 小 -> 大）
那就弹出比当前数大的数，弹出的时候计算记录(i右边最近比他小的数就是弹出的数，i左边比他小的数就是i压着的数，没有就是无)
3. 如果栈中还有数，那就一次弹出（i，因为i不是因为某个数弹出的，所以右边比他小的数"无"，左边比他小的数就是他压着的数）

### 单调栈原理

1. 假设数组无重复值，X 位置压着 Y 位置。X 位置是比Y小的，并且X出现的比Y晚
2. Y..X..Z,Z如果让X弹出，说明Z<X的说明Z是X最近右边比他小的数。Y是X最近左边比他小的数
3. 如果是数相等的时候。 下标压缩

## 滑动窗口、单调栈怎么用？

如果问题的答案和范围有关，并且范围和单调性有关，可以考虑滑动窗口 或者 单调栈 解决

想用滑动窗口，要想办法把具体的问题转化为滑动窗口的处理流程

想用滑动窗口最值的更新结构，就看看处理流程下，是否需要最值这个信息

想用单调栈，要想办法把具体的问题转化为单调栈所解决的原问题

滑动窗口及其最大值和最小值的更新结构、单调栈，都是重要算法原型









